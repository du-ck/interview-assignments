# 구동 시나리오

## 1. 서비스 개요
> DIP를 준수하기 위해 Entity <-> Domain 변환 로직은 Entity 클래스 내부에 작성하였으며, <br/>
application 과 infra 단에서 도메인 dto 를 바라보게 하였습니다.
- **Auth Service**: 로그인 및 회원가입을 담당합니다.
- **User Service**: 사용자 관리를 담당합니다.
- **Board Service**: 게시판 및 게시물 관리를 담당합니다.

## 2. 실행 전 준비 사항

- **Java JDK**: 17 이상의 JDK가 설치되어 있어야 합니다.
- **Gradle**: 프로젝트의 빌드 도구로 Gradle을 사용하므로, Gradle이 설치되어 있어야 합니다.
- **SQLite 설정**: mydb.db 파일이 없을 경우 /sql_script 폴더 내의 "db_guide.md" 대로 진행해야 합니다.
- **JWT 설정**: application.yml 에서 secret key 와 만료시간을 설정할 수 있습니다.

## 3. 서비스 실행 방법
> IntelliJ 기준으로 작성하였습니다.
1. 우측에 Gradle 탭을 클릭합니다.
2. Tasks - build - bootJar 를 더블클릭 합니다.
3. BUILD SUCCESSFUL 이 뜨면 프로젝트 폴더 "run_project.sh" 파일을 더블클릭 합니다.
4. localhost:8080 에서 서비스가 실행됩니다.

## 4. 종료 및 정리
- 각 서비스가 실행 중인 경우, 서비스 실행 창에서 Ctrl+C를 눌러 종료합니다.
- 데이터베이스 파일의 상태를 유지하려면, 프로젝트 폴더 내의 mydb.db 파일을 삭제하지 않도록 주의합니다.

# 테스트 시나리오 및 테스트 가이드

# 각 서비스에 대한 테스트 시나리오 및 테스트 가이드


## 1. 테스트 개요

- **Auth Service**: 로그인 및 회원가입 기능에 대한 테스트.
- **User Service**: 사용자 관리 기능에 대한 테스트.
- **Board Service**: 게시판 및 게시물 관리 기능에 대한 테스트.

## 2. 테스트 시나리오

### 2.1 Auth Service

| 테스트 ID   | 테스트 명칭                | 시나리오 설명                     | 기대 결과                            |
|----------|-----------------------|-----------------------------|----------------------------------|
| AUTH_001 | 회원가입 성공               | 올바른 입력 데이터로 회원가입 요청을 보냅니다.  | 200 OK, 회원가입된 유저정보 반환            |
| AUTH_002 | 회원가입 실패               | 이미 존재하는 이메일로 회원가입 요청을 보냅니다. | 409 AlreadyExistEmail, 에러 메시지 반환 |
| AUTH_003 | 회원가입 실패               | 회원가입에 실패합니다.                | 500 Exception, 에러 메시지 반환         |
| AUTH_004 | 로그인 성공                | 유효한 자격 증명으로 로그인 요청을 보냅니다.   | 200 OK, JWT 토큰 반환                |
| AUTH_005 | 로그인 실패 (잘못된 이메일/비밀번호) | 잘못된 이메일/비밀번호로 로그인 요청을 보냅니다. | 401 BadCredentials, 에러 메시지 반환    |

### 2.2 User Service

| 테스트 ID   | 테스트 명칭                  | 시나리오 설명                               | 기대 결과                            |
|----------|-------------------------|---------------------------------------|----------------------------------|
| USER_001 | 유저 목록 조회 성공             | **[관리자 권한]** 모든 유저 목록을 조회합니다.         | 200 OK, 사용자 목록 반환                |
| USER_002 | 유저 목록 조회 (결과없음)         | **[관리자 권한]** 조회된 유저가 없습니다.            | 200 OK, 검색결과 없음 메세지 반환           |
| USER_003 | 유저 정보 추가 성공             | **[관리자 권한]** 입력 데이터로 유저 정보를 추가 합니다.   | 200 OK, 추가된 유저정보 반환              |
| USER_004 | 유저 정보 추가 실패 (존재하는 이메일)  | **[관리자 권한]** 이미 존재하는 이메일로 유저를 추가합니다.  | 409 AlreadyExistEmail, 에러 메시지 반환 |
| USER_005 | 유저 정보 추가 실패             | **[관리자 권한]** 유저 정보 추가에 실패합니다.         | 500 Exception, 에러 메시지 반환         |
| USER_006 | 유저 정보 수정 성공             | **[관리자 권한]** 입력 데이터로 유저 정보를 수정합니다.    | 200 OK, True 메시지 반환              |
| USER_007 | 유저 정보 수정 실패 (유저id 없음)   | **[관리자 권한]** 수정 요청한 유저 id가 없습니다.      | 400 IllegalArgument, 에러 메시지 반환   |
| USER_008 | 유저 정보 수정 실패             | **[관리자 권한]** 유저 정보 수정에 실패합니다.         | 500 Exception, 에러 메시지 반환         |
| USER_009 | 유저 정보 삭제 성공             | **[관리자 권한]** 입력한 유저 id로 유저를 삭제합니다.    | 200 OK, True 메시지 반환              |
| USER_010 | 유저 정보 삭제 실패 (유저id 없음)   | **[관리자 권한]** 삭제 요청한 유저 id가 없습니다.      | 400 IllegalArgument, 에러 메시지 반환   |
| USER_011 | 유저 정보 삭제 실패 (이미 삭제된 유저) | **[관리자 권한]** 삭제 요청한 유저가 이미 삭제된 유저입니다. | 500 IllegalState, 에러 메시지 반환      |

### 2.3 Board Service

| 테스트 ID    | 테스트 명칭                  | 시나리오 설명                           | 기대 결과                                    |
|-----------|-------------------------|-----------------------------------|------------------------------------------|
| BOARD_001 | 게시판 목록 조회 성공            | 게시판 목록을 조회합니다.                    | 200 OK, 게시글 목록 반환                        |
| BOARD_002 | 게시판 목록 조회 실패            | 조회된 게시판이 없습니다.                    | 200 OK, 검색결과 없음 메시지 반환                   |
| BOARD_003 | 게시글 목록 조회 성공            | 특정 게시판의 게시글 목록을 조회합니다.            | 200 OK, 게시글 목록 반환                        |
| BOARD_004 | 게시글 목록 조회 실패            | 조회된 게시글이 없습니다.                    | 200 OK, 검색결과 없음 메시지 반환                   |
| BOARD_005 | 게시판 생성 성공               | **[관리자 권한]** 입력한 데이터로 게시판을 생성합니다. | 200 OK, 생성된 게시판 반환                       |
| BOARD_006 | 게시판 생성 실패 (이미 존재하는 게시판) | **[관리자 권한]** 이미 존재하는 게시판을 추가합니다.  | 409 AlreadyExistBoard, 에러 메시지 반환         |
| BOARD_007 | 게시판 생성 실패               | **[관리자 권한]** 게시판 생성에 실패합니다.       | 500 Exception, 에러 메시지 반환                 |
| BOARD_008 | 게시글 수정 성공               | 입력한 데이터로 게시글 정보를 수정합니다.           | 200 OK, 수정한 게시글 정보 반환                    |
| BOARD_009 | 게시글 수정 실패 (없는 post id)  | 없는 post id 로 게시글을 수정합니다.          | 400 IllegalArgument, 에러 메시지 반환           |
| BOARD_010 | 게시글 수정 실패               | 게시글 수정에 실패합니다.                    | 500 Exception, 에러 메시지 반환                 |

## 3. 테스트 방법

### 3.1 JUnit 을 이용한 단위 테스트
> IntelliJ 기준으로 작성하였습니다.
1. **IntelliJ**에서 **Test 폴더** 내에 **domain 폴더** 로 이동합니다.
2.  ~~ServiceTest 우클릭 후 **'Debug ~~ServiceTest'** 를 클릭하여 테스트를 진행합니다.

### 3.2 Postman 을 이용한 단위 테스트
1. Postman을 열고, Import버튼을 클릭합니다.
2. 프로젝트 폴더 내에 **44labs.postman_collection.json** 파일을 넣어줍니다.
3. 원하는 Request 를 클릭하여 'Send' 로 테스트를 진행합니다.
4. 'ADMIN' 권한이 필요한 기능일 경우 해당 권한을 가진 계정을 '로그인' 후 오는 Token 을 </br>
헤더의 'Authorization' 의 Value 에 넣은 후 진행하시면 됩니다.